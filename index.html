<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>팀소개 프로젝트</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="module">
      // Firebase SDK 라이브러리 가져오기
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
      import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
      import {
        collection,
        addDoc,
      } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
      import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyBPMReE-tcQ6Bx43oSoizq725rrdQ9Fx9E",
        authDomain: "sparta-87f88.firebaseapp.com",
        projectId: "sparta-87f88",
        storageBucket: "sparta-87f88.appspot.com",
        messagingSenderId: "296182026935",
        appId: "1:296182026935:web:f6d094e79ed39d815fb332",
        measurementId: "G-C7C8MHE9R1",
      };

      // Firebase 인스턴스 초기화
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);
      $("#addMemberbtn").click(function () {
        if ($(".mypostingbox").css("display") === "none") {
          $(".mypostingbox").css("display", "flex");
        } else {
          $(".mypostingbox").css("display", "none");
        }
      });

      $("#addbtn").click(async function () {
        let image = $("#image").val();
        let name = $("#name").val();

        let doc = {
          image: image,
          name: name,
        };
        await addDoc(collection(db, "members"), doc);
        alert("추가 완료.");
        window.location.reload();
      });
      let docs = await getDocs(collection(db, "members"));
      docs.forEach((doc) => {
        let row = doc.data();
        let image = row["image"];
        let name = row["name"];
        let docId = doc.id; // Firestore 문서 ID

        let temp_html = `
          <div class="member">
            <a href="personalPage.html?memberId=${docId}">
              <img
                src="${image}"
                class="bd-placeholder-img rounded-circle"
                width="140"
                height="140"
                xmlns="http://www.w3.org/2000/svg"
                role="img"
                aria-label="Placeholder"
                preserveAspectRatio="xMidYMid slice"
                focusable="false"
              />
              <span class="name">${name}</span>
            </a>
          </div>`;

        $(".teamMembers").append(temp_html);
      });

      fetch("navbar.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("navbar").innerHTML = data;
          // 네비게이션 바가 로드되고 난 후 실행할 스크립트
          const script1 = document.createElement("script");
          script1.src = "Js/navbar/dday.js";
          document.body.appendChild(script1);

          const script2 = document.createElement("script");
          script2.src = "Js/navbar/weather.js";
          document.body.appendChild(script2);

          const script3 = document.createElement("script");
          script3.src = "Js/navbar/theme.js";
          document.body.appendChild(script3);
        });
    </script>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="Css/index.css" />
    <link rel="stylesheet" href="Css/teamMembers.css" />
    <link rel="stylesheet" href="Css/theme.css" />
  </head>
  <body class="whiteTheme">
    <div id="navbar"></div>
    <div class="mainContainer">
      <hr class="featurette-divider" />
      <section class="teamIntroduction">
        <div
          class="p-4 p-md-5 mb-4 rounded text-body-emphasis bg-body-secondary"
        >
          <div class="col-lg-6 px-0">
            <h1 class="display-4 fst-italic">
              Title of a longer featured blog post
            </h1>
            <p class="lead my-3">
              Multiple lines of text that form the lede, informing new readers
              quickly and efficiently about what’s most interesting in this
              post’s contents.
            </p>
            <p class="lead mb-0">
              <a href="#" class="text-body-emphasis fw-bold"
                >Continue reading...</a
              >
            </p>
          </div>
          <div class="row mb-2">
            <div class="col-md-6">
              <div
                class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative"
              >
                <div class="col p-4 d-flex flex-column position-static">
                  <strong class="d-inline-block mb-2 text-primary-emphasis"
                    >World</strong
                  >
                  <h3 class="mb-0">Featured post</h3>
                  <div class="mb-1 text-body-secondary">Nov 12</div>
                  <p class="card-text mb-auto">
                    This is a wider card with supporting text below as a natural
                    lead-in to additional content.
                  </p>
                  <a
                    href="#"
                    class="icon-link gap-1 icon-link-hover stretched-link"
                  >
                    Continue reading
                    <svg class="bi">
                      <use xlink:href="#chevron-right"></use>
                    </svg>
                  </a>
                </div>
                <div class="col-auto d-none d-lg-block">
                  <svg
                    class="bd-placeholder-img"
                    width="200"
                    height="250"
                    xmlns="http://www.w3.org/2000/svg"
                    role="img"
                    aria-label="Placeholder: Thumbnail"
                    preserveAspectRatio="xMidYMid slice"
                    focusable="false"
                  >
                    <title>Placeholder</title>
                    <rect width="100%" height="100%" fill="#55595c"></rect>
                    <text x="50%" y="50%" fill="#eceeef" dy=".3em">
                      Thumbnail
                    </text>
                  </svg>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div
                class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative"
              >
                <div class="col p-4 d-flex flex-column position-static">
                  <strong class="d-inline-block mb-2 text-success-emphasis"
                    >Design</strong
                  >
                  <h3 class="mb-0">Post title</h3>
                  <div class="mb-1 text-body-secondary">Nov 11</div>
                  <p class="mb-auto">
                    This is a wider card with supporting text below as a natural
                    lead-in to additional content.
                  </p>
                  <a
                    href="#"
                    class="icon-link gap-1 icon-link-hover stretched-link"
                  >
                    Continue reading
                    <svg class="bi">
                      <use xlink:href="#chevron-right"></use>
                    </svg>
                  </a>
                </div>
                <div class="col-auto d-none d-lg-block">
                  <svg
                    class="bd-placeholder-img"
                    width="200"
                    height="250"
                    xmlns="http://www.w3.org/2000/svg"
                    role="img"
                    aria-label="Placeholder: Thumbnail"
                    preserveAspectRatio="xMidYMid slice"
                    focusable="false"
                  >
                    <title>Placeholder</title>
                    <rect width="100%" height="100%" fill="#55595c"></rect>
                    <text x="50%" y="50%" fill="#eceeef" dy=".3em">
                      Thumbnail
                    </text>
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <hr class="featurette-divider" />
      <div class="mypostingbox">
        <div class="form-floating mb-3">
          <input
            type="email"
            class="form-control"
            id="image"
            placeholder="이미지 주소"
          />
          <label for="image">이미지 주소</label>
        </div>
        <div class="form-floating mb-3">
          <input
            type="email"
            class="form-control"
            id="name"
            placeholder="dlfma"
          />
          <label for="name">이름</label>
        </div>

        <button id="addbtn" type="button" class="btn btn-primary">
          추가하기
        </button>
      </div>
      <section class="teamMembers">
        <button type="button" id="addMemberbtn" class="btn btn-outline-info">
          멤버 추가
        </button>
      </section>
    </div>
  </body>
</html>
